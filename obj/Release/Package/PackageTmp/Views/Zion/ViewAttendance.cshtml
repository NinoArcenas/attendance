
@{
    ViewBag.Title = "ViewAttendance";

    string parcelCode = ViewBag.viewattendance as string;

    int id = 0;
    var attendance = AttendanceManagementSystem.Controllers.ZionController.AttendanceListUsinggencode(parcelCode);
    foreach (var at in attendance)
    {
        id = at.id;
    }

    //get list of attendance
    var GetListOfAttendance = AttendanceManagementSystem.Controllers.ZionController.GetListOfAttendance_Item(parcelCode);
}

<body class="background-White" style="background-color:white">
    <div class="widget-body" style="background-color:white">

        <div class="row">
            <div class="col-xs-12">
                <h3 class="header smaller lighter blue">jQuery dataTables</h3>

                <div class="clearfix">
                    <div class="pull-right tableTools-container"></div>
                </div>
                <div class="table-header">
                    Results for "Latest Registered Domains"
                </div>

                <!-- div.table-responsive -->
                <!-- div.dataTables_borderWrap -->
                <div>
                    <table class="table table-striped table-bordered table-hover" id="viewattendanceTable">
                        <thead>
                            <!-- Row 1: section headers -->
                            <tr>
                                <th rowspan="3" class="text-center">No.</th>
                                <th rowspan="3" class="text-center">Life Number</th>
                                <th rowspan="3" class="text-center">Name</th>
                                <th colspan="4" class="text-center">1st Week</th>
                                <th colspan="4" class="text-center">2nd Week</th>
                                <th colspan="4" class="text-center">3rd Week</th>
                                <th colspan="4" class="text-center">4th Week</th>
                                <th colspan="4" class="text-center">5th Week</th>

                                <!-- “No. of Attendance” is actually 4 summary columns -->
                                <th colspan="4" class="text-center">No. of Attendance</th>
                            </tr>

                            <!-- Row 2: dates + month totals (these span all rows) -->
                            <tr>
                                <th>2-Sep</th>
                                <th colspan="3">6-Sep</th>
                                <th>9-Sep</th>
                                <th colspan="3">13-Sep</th>
                                <th>16-Sep</th>
                                <th colspan="3">20-Sep</th>
                                <th>23-Sep</th>
                                <th colspan="3">27-Sep</th>
                                <th>30-Sep</th>
                                <th colspan="3">...</th>

                                <!-- These 4 are the “No. of Attendance” columns -->
                                <th rowspan="1">September</th>
                                <th rowspan="1">August</th>
                                <th rowspan="1">July</th>
                                <th rowspan="1">June</th>
                            </tr>

                            <!-- Row 3: leaf columns (must match tbody td count) -->
                            <tr>
                                <!-- 1st week -->
                                <th>T</th>
                                <th>S1</th>
                                <th>S2</th>
                                <th>S3</th>
                                <!-- 2nd week -->
                                <th>T</th>
                                <th>S1</th>
                                <th>S2</th>
                                <th>S3</th>
                                <!-- 3rd week -->
                                <th>T</th>
                                <th>S1</th>
                                <th>S2</th>
                                <th>S3</th>
                                <!-- 4th week -->
                                <th>T</th>
                                <th>S1</th>
                                <th>S2</th>
                                <th>S3</th>
                                <!-- 5th week -->
                                <th>T</th>
                                <th>S1</th>
                                <th>S2</th>
                                <th>S3</th>
                                <!-- summary (same four as above; they don’t need subheaders) -->
                                <th></th>
                                <th></th>
                                <th></th>
                                <th></th>
                            </tr>
                        </thead>

                        <tbody>
                            @{

                                foreach (var proditem in GetListOfAttendance)
                                {
                                    //get product using prod gen code
                                    var GetListOfAttendancePresentUsingGencode = AttendanceManagementSystem.Controllers.ZionController.GetListOfAttendancePresentUsingGencode(proditem.members_gencode);
                                    foreach (var listofattend in GetListOfAttendancePresentUsingGencode)
                                    {
                                        var GetFullnameUsingIDno = AttendanceManagementSystem.Controllers.ZionController.GetMemberFullnameUsingGencode(listofattend.members_gencode);
                                        var GetLifeNumberUsingIDno = AttendanceManagementSystem.Controllers.ZionController.GetMemberLifeNumberUsingGencode(listofattend.members_gencode);
                                        <tr class="hover-actions-trigger btn-reveal-trigger position-static">
                                            <td class="color align-middle white-space-nowrap text-900 py-0 ps-4">@listofattend.id</td>
                                            <td class="color align-middle white-space-nowrap text-900 py-0 ps-4">@GetLifeNumberUsingIDno</td>
                                            <td class="color align-middle white-space-nowrap text-900 py-0 ps-4">@GetFullnameUsingIDno</td>
                                            <td class="color align-middle white-space-nowrap text-900 py-0 ps-4">

                                                @if (listofattend.weeks == "1st Week" && listofattend.worship_day == "T")
                                                {
                                                    <label><i class="ace-icon glyphicon glyphicon-ok"></i></label>
                                                }

                                            </td>
                                            <td class="color align-middle white-space-nowrap text-900 py-0 ps-4">
                                                @if (listofattend.weeks == "1st Week" && listofattend.worship_day == "S1")
                                                {
                                                    <label><i class="ace-icon glyphicon glyphicon-ok"></i></label>
                                                }
                                            </td>
                                            <td class="color align-middle white-space-nowrap text-900 py-0 ps-4">
                                                @if (listofattend.weeks == "1st Week" && listofattend.worship_day == "S2")
                                                {
                                                    <label><i class="ace-icon glyphicon glyphicon-ok"></i></label>
                                                }
                                            </td>
                                            <td class="color align-middle white-space-nowrap text-900 py-0 ps-4">
                                                @if (listofattend.weeks == "1st Week" && listofattend.worship_day == "S3")
                                                {
                                                    <label><i class="ace-icon glyphicon glyphicon-ok"></i></label>
                                                }
                                            </td>


                                            <td class="color align-middle white-space-nowrap text-900 py-0 ps-4">

                                                @if (listofattend.weeks == "2nd Week" && listofattend.worship_day == "T")
                                                {
                                                    <label><i class="ace-icon glyphicon glyphicon-ok"></i></label>
                                                }

                                            </td>
                                            <td class="color align-middle white-space-nowrap text-900 py-0 ps-4">
                                                @if (listofattend.weeks == "2nd Week" && listofattend.worship_day == "S1")
                                                {
                                                    <label><i class="ace-icon glyphicon glyphicon-ok"></i></label>
                                                }
                                            </td>
                                            <td class="color align-middle white-space-nowrap text-900 py-0 ps-4">
                                                @if (listofattend.weeks == "2nd Week" && listofattend.worship_day == "S2")
                                                {
                                                    <label><i class="ace-icon glyphicon glyphicon-ok"></i></label>
                                                }
                                            </td>
                                            <td class="color align-middle white-space-nowrap text-900 py-0 ps-4">
                                                @if (listofattend.weeks == "2nd Week" && listofattend.worship_day == "S3")
                                                {
                                                    <label><i class="ace-icon glyphicon glyphicon-ok"></i></label>
                                                }
                                            </td>

                                            <td class="color align-middle white-space-nowrap text-900 py-0 ps-4">

                                                @if (listofattend.weeks == "3rd Week" && listofattend.worship_day == "T")
                                                {
                                                    <label><i class="ace-icon glyphicon glyphicon-ok"></i></label>
                                                }

                                            </td>
                                            <td class="color align-middle white-space-nowrap text-900 py-0 ps-4">
                                                @if (listofattend.weeks == "3rd Week" && listofattend.worship_day == "S1")
                                                {
                                                    <label><i class="ace-icon glyphicon glyphicon-ok"></i></label>
                                                }
                                            </td>
                                            <td class="color align-middle white-space-nowrap text-900 py-0 ps-4">
                                                @if (listofattend.weeks == "3rd Week" && listofattend.worship_day == "S2")
                                                {
                                                    <label><i class="ace-icon glyphicon glyphicon-ok"></i></label>
                                                }
                                            </td>
                                            <td class="color align-middle white-space-nowrap text-900 py-0 ps-4">
                                                @if (listofattend.weeks == "3rd Week" && listofattend.worship_day == "S3")
                                                {
                                                    <label><i class="ace-icon glyphicon glyphicon-ok"></i></label>
                                                }
                                            </td>

                                            <td class="color align-middle white-space-nowrap text-900 py-0 ps-4">

                                                @if (listofattend.weeks == "4th Week" && listofattend.worship_day == "T")
                                                {
                                                    <label><i class="ace-icon glyphicon glyphicon-ok"></i></label>
                                                }

                                            </td>
                                            <td class="color align-middle white-space-nowrap text-900 py-0 ps-4">
                                                @if (listofattend.weeks == "4th Week" && listofattend.worship_day == "S1")
                                                {
                                                    <label><i class="ace-icon glyphicon glyphicon-ok"></i></label>
                                                }
                                            </td>
                                            <td class="color align-middle white-space-nowrap text-900 py-0 ps-4">
                                                @if (listofattend.weeks == "4th Week" && listofattend.worship_day == "S2")
                                                {
                                                    <label><i class="ace-icon glyphicon glyphicon-ok"></i></label>
                                                }
                                            </td>
                                            <td class="color align-middle white-space-nowrap text-900 py-0 ps-4">
                                                @if (listofattend.weeks == "4th Week" && listofattend.worship_day == "S3")
                                                {
                                                    <label><i class="ace-icon glyphicon glyphicon-ok"></i></label>
                                                }
                                            </td>

                                            <td class="color align-middle white-space-nowrap text-900 py-0 ps-4">
                                                @if (listofattend.weeks == "5th Week" && listofattend.worship_day == "T")
                                                {
                                                    <label><i class="ace-icon glyphicon glyphicon-ok"></i></label>
                                                }
                                            </td>
                                            <td class="color align-middle white-space-nowrap text-900 py-0 ps-4">
                                                @if (listofattend.weeks == "5th Week" && listofattend.worship_day == "S1")
                                                {
                                                    <label><i class="ace-icon glyphicon glyphicon-ok"></i></label>
                                                }
                                            </td>
                                            <td class="color align-middle white-space-nowrap text-900 py-0 ps-4">
                                                @if (listofattend.weeks == "5th Week" && listofattend.worship_day == "S2")
                                                {
                                                    <label><i class="ace-icon glyphicon glyphicon-ok"></i></label>
                                                }
                                            </td>
                                            <td class="color align-middle white-space-nowrap text-900 py-0 ps-4">
                                                @if (listofattend.weeks == "5th Week" && listofattend.worship_day == "S3")
                                                {
                                                    <label><i class="ace-icon glyphicon glyphicon-ok"></i></label>
                                                }
                                            </td>

                                            <td class="color align-middle white-space-nowrap text-900 py-0 ps-4">
                                                @if (listofattend.weeks == "5th Week" && listofattend.worship_day == "T")
                                                {
                                                    <label><i class="ace-icon glyphicon glyphicon-ok"></i></label>
                                                }
                                            </td>
                                            <td class="color align-middle white-space-nowrap text-900 py-0 ps-4">
                                                @if (listofattend.weeks == "5th Week" && listofattend.worship_day == "S1")
                                                {
                                                    <label><i class="ace-icon glyphicon glyphicon-ok"></i></label>
                                                }
                                            </td>
                                            <td class="color align-middle white-space-nowrap text-900 py-0 ps-4">
                                                @if (listofattend.weeks == "5th Week" && listofattend.worship_day == "S2")
                                                {
                                                    <label><i class="ace-icon glyphicon glyphicon-ok"></i></label>
                                                }
                                            </td>
                                            <td class="color align-middle white-space-nowrap text-900 py-0 ps-4">
                                                @if (listofattend.weeks == "5th Week" && listofattend.worship_day == "S3")
                                                {
                                                    <label><i class="ace-icon glyphicon glyphicon-ok"></i></label>
                                                }
                                            </td>
                                        </tr>
                                    }
                                }
                            }

                        </tbody>
                    </table>
                </div>
            </div>
        </div>

    </div>
</body>


@section Scripts {

    @Scripts.Render("~/bundles/jqueryval")

    <script>

        $(document).ready(function () {

            $("#viewattendanceTable").DataTable();
            $("#dynamic-table").DataTable();
        });

    </script>
}